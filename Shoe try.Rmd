---
title: "Shoe try"
author: "Blake Lin"
date: "4/21/2022"
output: html_document
---

## Discussion Note
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

monthly_retail_df <- read_csv("data/monthly_retail.csv")
monthly_retail_df1 <- read_csv("data/monthly_retail.csv")
sp_index <- read_csv("data/s&p_index.csv")
shoe_data <- read_csv("shoe_data.csv")
library(tidyverse)
library(lubridate)

#Demographic
  # state population
  # state income

#Market Trend
  # ETF price - consumer good/ S&P 500
  # retail sales trend - US Census Bureau

#Popularity
  #Team performance
  #google search trend
  #social media
  #Kayne's song on chart 

#Product
  # Shoe dimension
  # material






```


### Data Cleaning 
```{r data cleaning, echo=FALSE}

# put on time stamp for every data sets
shoe_data = shoe_data %>% 
  mutate(time_stamp=mdy(shoe_data$order_date), .before=order_date)

#sporting good index
monthly_retail_df=monthly_retail_df %>% 
  mutate(time_stamp=mdy(Period), .before = Period)
monthly_retail_df = monthly_retail_df[ ,-(2)]

monthly_retail_df = monthly_retail_df%>%
group_by(time_stamp) %>%
expand(time_stamp = seq(floor_date(time_stamp, unit = "month"),
       ceiling_date(time_stamp, unit="month")-days(1), by="day"), sporting_goods) %>% as.data.frame()

# retail monthly index
monthly_retail_df1=monthly_retail_df1 %>% 
  mutate(time_stamp=mdy(Period), .before = Period)
monthly_retail_df1 = monthly_retail_df1[ ,-(2)]

monthly_retail_df1 = monthly_retail_df1%>%
group_by(time_stamp) %>%
expand(time_stamp = seq(floor_date(time_stamp, unit = "month"),
       ceiling_date(time_stamp, unit="month")-days(1), by="day"), monthly_retail) %>% as.data.frame()


#sp index
sp_index = sp_index[ ,-(3:10)]

sp_index = sp_index%>% 
  mutate(time_stamp=mdy(date), .before= date)

sp_index = sp_index[ ,-(2)]


# merge 
shoe_data = shoe_data %>%
    left_join(monthly_retail_df, by='time_stamp') %>%
    left_join(monthly_retail_df1, by='time_stamp')%>%
    left_join(sp_index, by='time_stamp')

```







### Reference 
##### S&P Retail Select Industry Index
https://www.spglobal.com/spdji/en/indices/equity/sp-retail-select-industry-index/#overview

##### US Census Bureau
https://www.census.gov/retail/marts/historic_releases.html

